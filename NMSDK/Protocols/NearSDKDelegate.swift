//
//  NearSDKDelegate.swift
//  NMSDK
//
//  Created by Francesco Colleoni on 08/04/16.
//  Copyright Â© 2016 Near srl. All rights reserved.
//

import Foundation
import NMJSON
import NMPlug

/// The protocol which should be implemented by classes which should receive and consume events generated by `NearSDK`.
@objc
public protocol NearSDKDelegate {
    // MARK: Common methods
    /// This method is executed when all core plugins used by `NearSDK` which require to sync themselves with nearit.com.
    ///
    /// - parameters:
    ///   - errors: an array of errors produced by plugins which failed to synchronize with nearit.com; if `errors.count` is less than or equal to 0, the synchronization task is supposed to be successful
    optional func nearSDKDidSync(errors: [CorePluginError])
    
    /// This method is executed when one of core plugins used by `NearSDK` synchronizes itself with nearit.com.
    ///
    /// - parameters:
    ///   - plugin: the core plugin which originated the event 
    ///   - error: the optional error which describes why a core plugin did fail its synchronization task; if nil, the synchronization task is supposed to be successful
    optional func nearSDKPluginDidSync(plugin: CorePlugin, error: CorePluginError?)
    
    /// This method is executed whenever `NearSDK` receives an event.
    ///
    /// - parameters:
    ///   - event: the event received by `NearSDK`
    optional func nearSDKDidReceiveEvent(event: PluginEvent)
    
    /// This method is executed whenever `NearSDK` detects an error.
    ///
    /// - parameters:
    ///   - error: the `NearSDKError` received by `NearSDK`
    ///   - message: a `String` which better describes the error
    optional func nearSDKDidFail(error error: NearSDKError, message: String)
    
    // MARK: Evaluating reactions
    /// This method is executed whenever `NearSDK` evaluates one or more notification reactions.
    /// 
    /// - parameters:
    ///   - notifications: notification reactions evaluated by `NearSDK`
    optional func nearSDKDidEvaluate(notifications collection: [Notification])
    
    /// This method is executed whenever `NearSDK` evaluates one or more content reactions.
    /// 
    /// - parameters:
    ///   - contents: content reactions evaluated by `NearSDK`
    optional func nearSDKDidEvaluate(contents collection: [Content])
    
    /// This method is executed whenever `NearSDK` evaluates one or more poll reactions.
    ///
    /// - parameters:
    ///   - polls: poll reactions evaluated by `NearSDK`
    optional func nearSDKDidEvaluate(polls collection: [Poll])
}
